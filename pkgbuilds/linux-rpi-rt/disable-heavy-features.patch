--- PKGBUILD	2026-02-16 10:00:00
+++ PKGBUILD	2026-02-16 10:05:00
@@ -81,6 +81,38 @@
   # Show RT status
   echo "RT Preemption status:"
   grep "CONFIG_PREEMPT" .config | grep -v "^#" || echo "  (no PREEMPT config found)"
+
+  # Disable heavy features to reduce build time and image size
+  echo "Disabling unnecessary features for pi-Stomp..."
+
+  # Debug info (saves significant build time and kernel size)
+  scripts/config --disable DEBUG_INFO
+  scripts/config --disable DEBUG_INFO_BTF
+  scripts/config --disable DEBUG_INFO_DWARF_TOOLCHAIN_DEFAULT
+  scripts/config --disable GDB_SCRIPTS
+
+  # Filesystems not needed on an SD card appliance
+  scripts/config --disable XFS_FS
+  scripts/config --disable BTRFS_FS
+  scripts/config --disable F2FS_FS
+  scripts/config --disable NILFS2_FS
+
+  # Staging drivers
+  scripts/config --disable STAGING
+
+  # GPU drivers for non-RPi hardware
+  scripts/config --disable DRM_AMDGPU
+  scripts/config --disable DRM_I915
+  scripts/config --disable DRM_NOUVEAU
+  scripts/config --disable DRM_RADEON
+  scripts/config --disable DRM_XE
+  scripts/config --disable DRM_VMWGFX
+
+  # Network hardware not on a Pi
+  scripts/config --disable INFINIBAND
+  scripts/config --disable ISDN
+
+  # PCI sound cards (Pi uses I2S/USB only)
+  scripts/config --disable SND_PCI
+
+  make olddefconfig
 }

 build() {
